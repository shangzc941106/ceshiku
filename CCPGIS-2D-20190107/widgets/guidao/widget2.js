//定义一些常量, 用于坐标转换
var x_PI = 3.14159265358979324 * 3000.0 / 180.0;
var PI = 3.1415926535897932384626;
var a = 6378245.0;
var ee = 0.00669342162296594323;

var ghLine = 
    [
        {'M8线三期': [
            {'王府井': '116.411503,39.911607'},
            {'前门': '116.398353,39.900558'},
            {'永定门': '116.404,39.873135'},
            {'大红门': '116.40329,39.833958'},
            {'西洼池': '116.420025,39.781747'}
        ]},
        {'M6线二期': [
            {'物资学院站': '116.639316,39.926801;116.645753,39.926674;116.653081,39.927143;116.653982,39.927143;116.654411,39.927061;116.656954,39.92632;116.65741,39.926217;116.657416,39.926209;116.659025,39.925526;116.660522,39.924232;116.660607,39.924088;116.660656,39.923607;116.66094,39.921891;116.661111,39.919274'},
            {'通州北关站': '116.661131,39.917962;116.661142,39.916613;116.662376,39.915774;116.667011,39.914931;116.66759,39.914733;116.66759,39.914733'},
            {'通运门站': '116.673284,39.910583;116.683651,39.904586;116.686784,39.903566'},
            {'北运河西站': '116.688358,39.903024;116.69192,39.90167;116.695267,39.901605'},
            {'北运河东站': '116.707564,39.903079'},
            {'郝家府站': '116.717826,39.903195'},
            {'东夏园站': '116.73385,39.903147;116.744643,39.903077'},
            {'潞城站': '116.74739,39.902674'}
        ]},
        {'M15线二期': [
            {'中央党校': '116.280631,40.005058'},
            {'圆明园': '116.303564,40.007919'},
            {'六道口': '116.35267,40.000958'},
            {'大屯': '116.405594,40.002522'},
            {'望京西': '116.449884,39.995724'}
        ]},
        {'房山线': [
            {'郭公庄': '116.301889,39.814322;116.301767,39.811068;116.301166,39.809914;116.300265,39.809486;116.292926,39.808167'},
            {'大葆台': '116.291681,39.80781;116.275843,39.801628;116.245803,39.797342;116.228293,39.796287'},
            {'稻田': '116.21884,39.794885;116.216191,39.794226'},
            {'长阳': '116.211692,39.763871;116.194099,39.76376;116.193466,39.763719;116.192554,39.763513;116.192608,39.763546;116.191073,39.762795;116.189668,39.761154'},
            {'篱笆房': '116.189453,39.760651;116.185473,39.75218'},
            {'广阳城': '116.184969,39.747932'},
            {'良乡大学城北站': '116.183386,39.730021;116.183478,39.726432;116.183166,39.725466;116.183166,39.725448;116.182635,39.724731;116.182082,39.724227;116.180779,39.723563;116.179979,39.723328;116.179132,39.723183'},
            {'良乡大学城站': '116.17652,39.723189'},
            {'良乡大学城西': '116.156282,39.723157;116.153689,39.72319;116.152118,39.723235'},
            {'良乡南关': '116.140804,39.723202'},
            {'苏庄': '116.115306,39.723188'}
        ]},
        {'M14线二期': [
            {'劲松': '116.455111,39.884433'},
            {'朝阳公园': '116.482534,39.944304'},
            {'酒仙桥': '116.494721,39.973688'},
            {'望京': '116.466485,39.995197'}
        ]},
        {'S1线': [
            {'五路居': '116.276531,39.932584;116.274686,39.932482;116.273827,39.932152;116.272068,39.929256;116.271038,39.928829'},
            {'田村': '116.25267,39.929717;116.238508,39.929355;116.236791,39.929684;116.23353,39.93179;116.231117,39.932449'},
            {'廖公庄': '116.226749,39.932514;116.224603,39.93258;116.222973,39.932909;116.202931,39.933798;116.202159,39.933633;116.201687,39.933436;116.20027,39.93211;116.197181,39.930606;116.191387,39.929115'},
            {'杨庄': '116.186409,39.928039'},
            {'苹果园': '116.178266,39.925843;116.176614,39.925333;116.175176,39.924741;116.172773,39.924181;116.171163,39.924033;116.169661,39.923852;116.167365,39.923885;116.163439,39.923852'},
            {'金安桥': '116.161861,39.923959'},
            {'四道桥': '116.133988,39.916044;116.130898,39.914099;116.118838,39.911881;116.118151,39.911617;116.116993,39.91142'},
            {'桥户营': '116.115791,39.911403;116.113248,39.911115;116.113248,39.911114;116.112776,39.911976;116.112271,39.911729;116.111692,39.911136;116.111467,39.910338;116.11151,39.91014'},
            {'上岸': '116.112175,39.905161;116.112768,39.901199'},
            {'栗园庄': '116.11313,39.895899;116.113373,39.892788;116.113266,39.891998;116.113072,39.891471;116.111978,39.890582;116.111313,39.890368;116.117086,39.890318'},
            {'小园': '116.11444,39.890471'},
            {'石厂': '116.100306,39.889413'}
        ]},
        {'M7线一期': [
            {'北京西站': '116.322056,39.89491'},
            {'湾子站': '116.327753,39.889954'},
            {'达官营': '116.336455,39.889884'},
            {'菜市口': '116.374425,39.889297'},
            {'珠市口站': '116.398104,39.891167'},
            {'磁器口': '116.41887,39.893093'},
            {'广渠门': '116.44525,39.894087'},
            {'百子湾': '116.490883,39.894566'},
            {'化工站': '116.503439,39.887369'},
            {'厚俸桥站': '116.500801,39.870663'},
            {'垡头站': '116.511829,39.860864'},
            {'焦化厂站': '116.537247,39.855488'}
        ]},
        {'M15线一期': [
            {'望京西': '116.447274,39.995159;116.453132,39.99659;116.454247,39.996754;116.46695,39.997017;116.46798,39.997214'},
            {'望京': '116.469289,39.998611;116.472958,40.001636;116.473709,40.001833;116.48034,40.002047;116.481992,40.001866;116.484996,40.001883;116.485597,40.001998'},
            {'望京东': '116.487035,40.003329;116.489717,40.005709;116.490919,40.008734;116.492034,40.015636'},
            {'崔各庄': '116.492378,40.022341;116.492936,40.032199;116.493214,40.032742;116.493708,40.033037;116.494545,40.0333'},
            {'马泉营': '116.503278,40.033974;116.525208,40.03473;116.526066,40.03496;116.528341,40.03588;116.530658,40.037588;116.532976,40.041564'},
            {'孙河': '116.534392,40.045243;116.539756,40.05408;116.541087,40.055427;116.544091,40.057332;116.553146,40.063901;116.554262,40.065675'},
            {'国展': '116.554948,40.070273'},
            {'花梨坎': '116.557437,40.084525;116.561514,40.108292'},
            {'后沙峪': '116.563875,40.114299;116.568165,40.119352;116.57752,40.116571;116.580567,40.11772;116.582111,40.117916'},
            {'南法信': '116.609535,40.118478;116.616923,40.11876;116.631053,40.118965'},
            {'石门': '116.641117,40.119842;116.642307,40.119892;116.649238,40.119892'},
            {'顺义': '116.656952,40.130039;116.662306,40.119859;116.665213,40.11976;116.666533,40.119654;116.668636,40.119408;116.670202,40.119342;116.6709,40.119424;116.671951,40.119629;116.673357,40.130111;116.674027,40.130445;116.676999,40.132164;116.677847,40.132459;116.67915,40.132619;116.68187,40.132586'},
            {'俸伯': '116.684665,40.132681'}
        ]},
        {'M14线一期': [
            {'卢沟桥': '116.220832,39.850507'},
            {'丰台体育中心': '116.277448,39.866779'},
            {'菜户营': '116.344549,39.870916'},
            {'西铁营': '116.350845,39.859539'},
            {'北京南站': '116.378596,39.865208'},
            {'劲松': '116.455111,39.884433'}
        ]},
        {'大兴线': [
            {'马家堡': '116.371361,39.853109'},
            {'新宫': '116.365549,39.811592'},
            {'西红门': '116.351865,39.792959'},
            {'黄村': '116.33709,39.728538'},
            {'义和庄': '116.319079,39.711387'},
            {'天宫院': '116.319932,39.670342'}
        ]},
        {'M6线一期': [
            {'五路': '116.296959,39.938374'},
            {'北海北站': '116.386829,39.933247'},
            {'南锣鼓巷站': '116.404192,39.933848'},
            {'东大桥': '116.452766,39.921635'},
            {'星火': '116.508638,39.947098'},
            {'定福庄': '116.559329,39.916833'}
        ]},
        {'M8线二期': [
            {'南锣鼓巷': '116.404192,39.933848;116.399255,39.933729;116.398558,39.933779;116.397281,39.934017;116.396659,39.934285;116.396471,39.934503;116.396411,39.934634;116.396321,39.935963;116.396203,39.936917'},
            {'什刹海': '116.396219,39.937583'},
            {'鼓楼大街': '116.393851,39.947611'},
            {'安德里北街': '116.395145,39.957227'},
            {'安华桥': '116.394655,39.968507'},
            {'北土城': '116.394193,39.976953'},
            {'奥林匹克公园': '116.39296,40.000921;116.393058,40.005149'},
            {'森林公园南门': '116.3926,40.010112;116.391924,40.015296;116.390679,40.017893;116.388104,40.020371;116.388093,40.020388;116.386709,40.021101;116.385519,40.021546;116.384371,40.021719'},
            {'林萃桥': '116.372998,40.021906;116.368267,40.022047;116.364619,40.023;116.363396,40.023641;116.359426,40.026714;116.35786,40.029014;116.354727,40.036958'},
            {'永泰庄': '116.35458,40.037728'},
            {'西小口': '116.351644,40.046873;116.34791,40.056297'},
            {'育新': '116.347328,40.060039;116.346846,40.063652;116.347082,40.0649;116.347768,40.065721;116.349957,40.067002;116.35736,40.070294;116.359506,40.071311'},
            {'霍营': '116.360286,40.071857;116.363111,40.073907;116.363325,40.074153;116.363583,40.074482'},
            {'回龙观东大街站': '116.363025,40.081175'}
        ]},
        {'M10线二期': [
            {'潘家园站': '116.460926,39.875387'},
            {'分钟寺': '116.453976,39.852227'},
            {'成寿寺': '116.455256,39.853316'},
            {'宋家庄': '116.428368,39.845849'},
            {'石榴庄': '116.414103,39.845905'},
            {'大红门站': '116.399087,39.845391'},
            {'角门东': '116.385644,39.845153;116.38441,39.845087;116.378987,39.845458;116.372238,39.845839'},
            {'角门西': '116.371118,39.845877'},
            {'草桥站': '116.35136,39.845884;116.350523,39.845823;116.349204,39.845724;116.346994,39.845246;116.344934,39.844785;116.345577,39.844916;116.343861,39.84462;116.341822,39.844356;116.336136,39.844356'},
            {'纪家庙': '116.333282,39.844472'},
            {'首经贸站': '116.320202,39.844463;116.309218,39.844363;116.307415,39.844989;116.305742,39.847065'},
            {'丰台站': '116.30454,39.849639;116.304087,39.851555;116.304087,39.85508'},
            {'泥洼': '116.304173,39.858609'},
            {'西局': '116.303819,39.86677'},
            {'六里桥': '116.302808,39.880239;116.302493,39.882716;116.302837,39.885087;116.303824,39.887261;116.309403,39.893287;116.309982,39.894258;116.31024,39.894735;116.310304,39.895822'},
            {'莲花桥站': '116.310347,39.897867'},
            {'公主坟站': '116.309919,39.907469;116.309737,39.914195;116.308707,39.915282;116.307076,39.91617;116.299566,39.920054;116.298708,39.920811;116.298257,39.921437;116.298085,39.922671'},
            {'西钓鱼台': '116.298064,39.923481;116.298043,39.924629;116.295468,39.931984'},
            {'慈寿寺': '116.29536,39.933383'},
            {'车道沟': '116.293818,39.947923;116.29389,39.949838;116.294491,39.952503;116.294791,39.95724'},
            {'长春桥': '116.294255,39.958527'},
            {'火器营': '116.289058,39.965938;116.287629,39.968024;116.287565,39.968106;116.287286,39.969438;116.287307,39.97105;116.288048,39.972743;116.288101,39.972776;116.289077,39.973582;116.289786,39.973903;116.290601,39.974133;116.292135,39.974289'},
            {'巴沟': '116.293362,39.974408'}
        ]},
        {'L2线': [
            {'宋家庄': '116.428368,39.845849;116.428408,39.837278;116.428666,39.836685;116.429267,39.836223;116.42931,39.83619;116.438236,39.834675;116.441455,39.834378'},
            {'肖村': '116.448364,39.834217;116.451124,39.834237;116.453691,39.834047;116.45471,39.833866;116.456373,39.833322;116.456974,39.833021;116.457291,39.832778;116.457575,39.832523;116.458042,39.831843;116.458562,39.830752'},
            {'小红门': '116.459226,39.827951;116.460403,39.825102;116.460617,39.824179;116.461089,39.811098;116.460424,39.80956;116.460338,39.808653'},
            {'旧宫': '116.460789,39.80691;116.461424,39.805401;116.461971,39.804602;116.46284,39.803819;116.464171,39.803003;116.465727,39.802401;116.46857,39.801684;116.470855,39.801363;116.473311,39.801404'},
            {'亦庄桥': '116.480307,39.803011;116.482476,39.80358;116.483876,39.804025'},
            {'亦庄文化园': '116.490632,39.80689;116.493108,39.807821;116.494309,39.80806;116.495103,39.808118;116.496498,39.808176;116.49858,39.807895;116.498655,39.807879;116.500597,39.807294;116.501691,39.806742;116.502538,39.806165;116.503644,39.805167'},
            {'万源街': '116.505446,39.802921'},
            {'荣京东街': '116.51339,39.793132'},
            {'荣昌东街': '116.521737,39.782799;116.530737,39.771632;116.532883,39.770676;116.534728,39.770643;116.536273,39.771138'},
            {'同济南路': '116.539835,39.7729'},
            {'经海路': '116.562245,39.783587;116.57203,39.788398;116.577866,39.792157'},
            {'次渠南': '116.581156,39.795224'},
            {'次渠': '116.591406,39.803632'}
        ]},
        {'M9线': [
            {'国家图书馆站': '116.325646,39.93959'},
            {'白石桥南站': '116.32568,39.933022'},
            {'白堆子站': '116.325762,39.923818'},
            {'军事博物馆站': '116.325762,39.923818;116.321118,39.906322'},
            {'北京西站': '116.321187,39.894733;116.321166,39.889811;116.321118,39.88972;116.321064,39.889605;116.320844,39.889461'},
            {'六里桥东': '116.315007,39.886979'},
            {'六里桥': '116.302454,39.880438;116.29842,39.8781;116.296918,39.877013;116.295502,39.87507;116.294987,39.873423;116.294301,39.869339'},
            {'七里庄': '116.294043,39.866934'},
            {'丰台东大街': '116.293442,39.855273;116.294172,39.850397;116.294494,39.84913'},
            {'丰台南路站': '116.296532,39.840578;116.297578,39.834269;116.297417,39.833194'},
            {'科怡路站': '116.297432,39.83248'},
            {'丰台科技园': '116.29749,39.83042;116.297104,39.827223;116.297268,39.823111;116.298169,39.820754;116.299886,39.819205;116.30068,39.818793;116.301323,39.817969;116.301795,39.816815'},
            {'郭公庄': '116.301889,39.814322'}
        ]},
        {'L1线': [
            {'东直门': '116.435842,39.941626;116.436673,39.941606;116.437054,39.941647;116.437349,39.94173;116.438185,39.942046;116.440621,39.94342;116.445932,39.950757;116.451993,39.956244;116.452144,39.956458;116.452411,39.957914;116.453045,39.958588'},
            {'三元桥': '116.456997,39.961508;116.515887,40.013947;116.516552,40.014391;116.517475,40.014818;116.562739,40.030601;116.564166,40.030905;116.56731,40.031134;116.56908,40.031587;116.57791,40.035004;116.592437,40.036721;116.607184,40.036598;116.607817,40.036639;116.608337,40.036721;116.609973,40.037247;116.611065,40.038438;116.61534,40.040964;116.616386,40.041941;116.616842,40.042742;116.616907,40.043118'},
            {'T3航站楼': '116.615579,40.052544'}
        ]},
        
        {'M10线一期（含奥运支线)': [
            {'巴沟站': '116.299578,39.980549;116.310454,39.981603;116.307714,39.980677'},
            {'苏州街站': '116.311768,39.981704'},
            {'海淀黄庄站': '116.324348,39.981865'},
            {'知春里站': '116.336091,39.982061'},
            {'知春路站': '116.347619,39.982065'},
            {'西土城站': '116.360484,39.982026'},
            {'牡丹园站': '116.376446,39.982371'},
            {'健德门站': '116.387816,39.982833'},
            {'北土城站': '116.400663,39.983255'},
            {'安贞门站': '116.411371,39.983322'},
            {'惠新西街南口站': '116.42404,39.983276'},
            {'芍药居站': '116.443571,39.983549;116.445245,39.982854'},
            {'太阳宫站': '116.454059,39.978367;116.463642,39.97163;116.46508,39.968534;116.464936,39.96787'},
            {'三元桥站': '116.463573,39.96688;116.462421,39.962838;116.467451,39.959133'},
            {'亮马桥站': '116.468743,39.955006'},
            {'农业展览馆站': '116.468772,39.946988'},
            {'团结湖站': '116.468337,39.939382'},
            {'呼家楼站': '116.468337,39.939382'},
            {'金台夕照站': '116.468282,39.922961'},
            {'国贸站': '116.467523,39.914435'},
            {'双井站': '116.468453,39.899186'},
            {'劲松站': '116.46801,39.890027'}
        ]},
        {'M5线': [
            {'宋家庄站': '116.428368,39.845849;116.429316,39.85229;116.42884,39.852533;116.428337,39.853391'},
            {'刘家窑站': '116.428565,39.863697'},
            {'蒲黄榆站': '116.428894,39.871689'},
            {'天坛东门站': '116.427392,39.888497;116.427152,39.89106;116.425786,39.893911;116.425499,39.894714'},
            {'磁器口站': '116.426035,39.899339'},
            {'崇文门站': '116.424439,39.906953'},
            {'东单站': '116.425249,39.914504'},
            {'灯市口站': '116.424169,39.923603'},
            {'东四站': '116.423405,39.930647'},
            {'张自忠路站': '116.423579,39.939914'},
            {'北新桥站': '116.423298,39.947111'},
            {'雍和宫站': '116.42311,39.955113;116.422956,39.955898;116.422723,39.956824;116.4231,39.957364;116.425292,39.958114;116.425328,39.958152;116.425301,39.960219;116.425395,39.960419'},
            {'和平里北街站': '116.425051,39.964752'},
            {'和平西桥站': '116.424463,39.974502'},
            {'惠新西街南口站': '116.42404,39.983276'},
            {'惠新西街北口站': '116.423532,39.994151;116.424156,40.00767'},
            {'大屯路东站': '116.424567,40.009611;116.422669,40.017888;116.423998,40.025181;116.42407,40.031186'},
            {'北苑路北站': '116.424525,40.036821;116.424383,40.038966;116.423808,40.041452;116.422227,40.043827'},
            {'立水桥南站': '116.420973,40.048143;116.418225,40.052256;116.41765,40.053637;116.417794,40.057668'},
            {'立水桥站': '116.418274,40.059244;116.419626,40.060333;116.419986,40.061106'},
            {'天通苑南站': '116.419113,40.072752;116.418602,40.078595'},
            {'天通苑站': '116.419233,40.081478;116.419608,40.083784;116.419608,40.085937'},
            {'天通苑北站': '116.419385,40.089597'}
        ]}
    ];


var zjLine = 
    [
        {'燕房线支线': [
            {'周口店': '115.95861,39.676448;115.964485,39.676885;115.973282,39.679082'},
            {'顾册': '115.977557,39.681964;115.980557,39.683871'},
            {'老城区': '115.987921,39.693209;115.991328,39.696882'},
            {'饶乐府': '116.006085,39.701481'}
        ]},
        {'新机场线一期': [
            {'草桥站': '116.346544,39.844891;116.346437,39.84354;116.34633,39.827887;116.345343,39.816482;116.345922,39.814752;116.35061,39.811802;116.356672,39.800576;116.361822,39.750244'},
            {'磁各庄站': '116.365637,39.73818'},
            {'新机场北航站楼站': '116.417934,39.514572'}
        ]},
        {'16号线': [
            {'苏州街': '116.306332,39.975642'},
            {'万寿寺': '116.309864,39.94795;116.310255,39.945002;116.31168,39.943505;116.315083,39.943225'},
            {'国家图书馆': '116.32519,39.943114;116.328099,39.942842;116.330889,39.941361;116.333077,39.937972'},
            {'二里沟': '116.333721,39.931855'},
            {'甘家口': '116.33464,39.92302'},
            {'玉渊潭东门': '116.33455,39.915044;116.334545,39.911259;116.334781,39.911139;116.335425,39.909708;116.335597,39.903964;116.334803,39.902071;116.33462,39.901396'},
            {'达官营': '116.334803,39.890736;116.334939,39.888114;116.336569,39.882944'},
            {'红莲南里': '116.336977,39.877629;116.336988,39.876324;116.336011,39.868823'},
            {'丽泽商务区': '116.336018,39.866916;116.336097,39.858035;116.335067,39.856388;116.330904,39.854543'},
            {'丰益桥南': '116.320261,39.852998'},
            {'丰台站': '116.30454,39.849639;116.297759,39.847378;116.296064,39.844973;116.296118,39.843556'},
            {'丰台南站': '116.277911,39.834485;116.297088,39.83895;116.296943,39.838167;116.296471,39.837656;116.296133,39.837504'},
            {'富丰桥': '116.285798,39.83615'},
            {'看丹站': '116.27275,39.83495;116.268194,39.834388;116.26607,39.834446;116.260722,39.835224;116.259869,39.835463;116.259273,39.835731;116.258903,39.836011;116.258694,39.836357;116.258522,39.837135'},
            {'榆树庄': '116.258841,39.839114;116.259237,39.841133;116.258936,39.841874;116.258293,39.842525;116.237039,39.849703;116.235011,39.849843;116.233111,39.849538'},
            {'宛平': '116.230033,39.84841'}
        ]},
        {'16号线二期': [
            {'北安河': '116.130428,40.068118'},
            {'屯佃': '116.21585,40.068454'},
            {'永丰': '116.238481,40.071868;116.248132,40.078484;116.249138,40.078595;116.251006,40.077601;116.252875,40.075061'},
            {'永丰南': '116.248154,40.065575'},
            {'西苑': '116.290908,39.998258'},
            {'苏州街': '116.306332,39.975642'}
        ]},
        {'8号线三期': [
            {'中国美术馆': '116.410818,39.925294'},
            {'王府井': '116.411188,39.908183;116.411483,39.903734;116.410196,39.901101;116.403244,39.900211'},
            {'前门站': '116.399344,39.899261;116.398222,39.898337'},
            {'珠市口': '116.398668,39.890799'},
            {'永定门外': '116.399671,39.866177'},
            {'和义站': '116.402203,39.814451;116.402632,39.806457;116.402932,39.805995;116.404413,39.805204'},
            {'东高地': '116.408361,39.805468;116.416,39.805155;116.418146,39.80255;116.421064,39.787019'},
            {'五福堂': '116.422781,39.785684'}
        ]},
        {'S1线': [
            {'金安桥': '116.163104,39.923642;116.168909,39.923504;116.17275,39.923997'},
            {'苹果园': '116.177872,39.925074'}
        ]},
        {'14号线': [
            {'张郭庄': '116.187193,39.8581;116.19097,39.86027;116.193029,39.860962'},
            {'园博园': '116.20157,39.861358;116.205904,39.861423;116.206848,39.861654;116.220658,39.867534;116.221989,39.867781;116.223083,39.867847;116.226619,39.866627;116.227692,39.865342;116.232542,39.858293;116.233304,39.857889;116.234505,39.857869'},
            {'大瓦窑': '116.240408,39.859529;116.242346,39.859817'},
            {'郭庄子': '116.252946,39.864922;116.259426,39.866866;116.261357,39.866833;116.267837,39.865384'},
            {'大井': '116.275948,39.865285'},
            {'七里庄': '116.293673,39.866059'},
            {'西局': '116.303736,39.866915'},
            {'莱户营': '116.34448,39.86813;116.347253,39.868076;116.348025,39.86768;116.348959,39.866346;116.350938,39.861387;116.351421,39.861074'},
            {'西铁营': '116.354311,39.861151;116.357606,39.861192;116.358904,39.861381;116.362766,39.862452'},
            {'景风门': '116.365797,39.862736;116.374729,39.862938;116.376853,39.863613;116.381798,39.866736;116.386574,39.868669'},
            {'陶然桥': '116.387131,39.868834;116.391401,39.868307;116.393054,39.868274;116.397045,39.868719;116.397603,39.868669;116.398311,39.868472'},
            {'永定门外': '116.399341,39.867451;116.400561,39.866162;116.401655,39.865585;116.407106,39.865091'},
            {'景泰': '116.410818,39.865453'},
            {'蒲黄榆': '116.423724,39.865646'},
            {'方庄': '116.440231,39.865877;116.448905,39.865684;116.45118,39.865256;116.453755,39.86407;116.455514,39.863905;116.456759,39.865552'},
            {'十里河': '116.457875,39.86654;116.458969,39.867154;116.461415,39.867928;116.474199,39.867876;116.476087,39.868139;116.477203,39.869193;116.477289,39.869621'},
            {'北工大西门': '116.477186,39.875569'},
            {'平乐园': '116.477154,39.88534'},
            {'红庙': '116.477991,39.915661'},
            {'金台路': '116.477927,39.922968'},
            {'朝阳公园': '116.478104,39.933754;116.478286,39.934835;116.478114,39.935921;116.475088,39.942091'},
            {'枣营': '116.474828,39.944193;116.475086,39.947811;116.475119,39.947845;116.476545,39.950016;116.486351,39.957204;116.486544,39.957476;116.48648,39.957648'},
            {'东风桥北': '116.485879,39.958395;116.485375,39.959143;116.485321,39.959596;116.489269,39.968386;116.489495,39.969876'},
            {'将台': '116.489453,39.971145;116.489646,39.976818;116.489151,39.97988'},
            {'高家园站': '116.488536,39.980579'},
            {'望京南': '116.481576,39.98468'},
            {'阜通': '116.471703,39.991704;116.468475,39.993894;116.467917,39.994782'},
            {'望京': '116.467886,39.9989'},
            {'东湖渠': '116.467411,40.01067'},
            {'来广营': '116.466808,40.020711;116.466994,40.022325;116.467402,40.023081;116.468174,40.023492;116.477476,40.026557'},
            {'善各庄': '116.478163,40.027181'}
        ]},
        {'6号线西延': [
            {'五路居': '116.276531,39.932584;116.274591,39.932571;116.274242,39.932509;116.273936,39.93239;116.273566,39.932049;116.272504,39.929885;116.272102,39.929379;116.271657,39.929148;116.271142,39.928939;116.270546,39.928861'},
            {'田村': '116.252779,39.929617;116.239202,39.929564;116.237394,39.929885;116.236884,39.930033;116.236246,39.930317;116.233183,39.932311;116.232888,39.932448;116.232003,39.932624;116.230495,39.93269;116.229111,39.932608;116.227792,39.932394'},
            {'廖公庄站': '116.226907,39.932402;116.225664,39.932449;116.223583,39.932976;116.202715,39.933839;116.202039,39.933683;116.20176,39.933486;116.201642,39.933362;116.19999,39.931898;116.197308,39.930483;116.196943,39.930532'},
            {'杨庄': '116.186461,39.927924'},
            {'苹果园': '116.178296,39.925843;116.176558,39.925398;116.175689,39.92502;116.174069,39.924362;116.172427,39.924049;116.170228,39.92395'},
            {'金安桥': '116.161862,39.923954'}
        ]},
        {'8号线四期': [
            {'五福堂': '116.422951,39.7856'},
            {'德茂站': '116.44059,39.772539;116.443154,39.770725;116.443722,39.770411;116.444967,39.769785;116.445777,39.769109;116.445933,39.768915'},
            {'瀛海站': '116.448741,39.761053'}
        ]},
        {'平谷线': [
            {'徐辛庄': '116.677968,39.98636;116.677748,39.984313;116.676139,39.983277;116.674358,39.982949;116.670581,39.984593;116.667105,39.988259;116.667062,39.988292;116.659616,39.992254;116.64429,39.992879'},
            {'曹各庄北': '116.60098,39.992222;116.576115,39.991114;116.569194,39.990359'},
            {'北岗子': '116.537207,39.975911'},
            {'东风桥北': '116.485902,39.958381'}
        ]},
        {'昌平线南延': [
            {'西二旗': '116.306295,40.053034'},
            {'清河站': '116.315301,40.041148;116.319041,40.037491;116.324577,40.035552;116.33449,40.036209;116.339769,40.038098;116.340391,40.038115;116.341357,40.037729'},
            {'上清桥站': '116.343524,40.034952;116.351453,40.024642'},
            {'学清路站': '116.352106,40.015273'},
            {'六道口': '116.35267,40.000958'},
            {'西土城': '116.354098,39.976549'},
            {'蓟门桥': '116.354029,39.967758'}
        ]},
        {'7号线东延': [
            {'焦化厂': '116.537247,39.855488;116.549564,39.849159'},
            {'黄厂村站': '116.552224,39.849141;116.557138,39.849537;116.56143,39.851086;116.563061,39.852618;116.564563,39.854776;116.566944,39.855797'},
            {'豆各庄站': '116.571115,39.856487'},
            {'黑庄户站': '116.590623,39.858142;116.616716,39.859687;116.623067,39.861367;116.626543,39.862816'},
            {'万盛南街': '116.630448,39.863508'},
            {'西口站': '116.42157,39.902435'},
            {'小马庄站': '116.669683,39.863444'},
            {'高楼金站': '116.685227,39.863091;116.69411,39.862264;116.695698,39.861308;116.69617,39.860287;116.696117,39.858838;116.695098,39.855972;116.691879,39.851193;116.690549,39.850272;116.688016,39.849251;116.685141,39.848855'},
            {'环球影城': '116.675957,39.848394'}
        ]},
        {'东四十条~东坝中街': [
            {'东四十条': '116.434133,39.933801'},
            {'工人体育馆': '116.441868,39.932259'},
            {'团结湖': '116.469719,39.928944;116.493356,39.933814'},
            {'石佛营': '116.496053,39.929649;116.503656,39.936594;116.504772,39.937466;116.508334,39.942418;116.508613,39.944211'},
            {'星火': '116.508638,39.947098;116.508666,39.948003;116.509085,39.948563;116.509643,39.948744'},
            {'朝阳体育中心': '116.528509,39.945621;116.540136,39.948422;116.544299,39.9476;116.546488,39.947764;116.547046,39.948521'},
            {'东坝中街': '116.547175,39.96566'}
        ]},
        {'11号线': [
            {'四季青': '116.278775,39.94686;116.275836,39.955354;116.276823,39.95644;116.27825,39.956744'},
            {'远大路': '116.28267,39.957155;116.288882,39.957344'},
            {'长春桥': '116.293324,39.9582;116.301559,39.959643;116.303264,39.960091'},
            {'苏州桥': '116.30724,39.961884;116.321345,39.966988'},
            {'人民大学站': '116.322106,39.967049'},
            {'光熙门': '116.43114,39.96957;116.434952,39.96957;116.436561,39.969257;116.437463,39.968887'},
            {'西坝河站': '116.441518,39.96633;116.452955,39.958797;116.455197,39.958608;116.456581,39.959233'},
            {'三元桥': '116.458148,39.960689;116.462772,39.964632;116.464199,39.965166;116.472278,39.966704;116.474617,39.967822;116.488296,39.980085;116.488607,39.980229'},
            {'高家园': '116.489889,39.980291'},
            {'酒仙桥': '116.504196,39.980455;116.510147,39.980415'},
            {'北岗子': '116.537198,39.975905;116.543147,39.97539;116.550228,39.975225;116.551859,39.975406'},
            {'东风': '116.553211,39.975817'}
        ]},
        {'19号线一期': [
            {'新宫': '116.372097,39.818302;116.349317,39.813249;116.34686,39.814584;116.345916,39.816018;116.345594,39.816628;116.345358,39.817551'},
            {'新发地站': '116.345261,39.822462'},
            {'草桥站': '116.348097,39.845928;116.349429,39.849314;116.351489,39.851027;116.362432,39.854355;116.364492,39.856562'},
            {'右安门外站': '116.364578,39.86322;116.363162,39.913177;116.364449,39.916568;116.364685,39.92264;116.364835,39.923825;116.367142,39.928449;116.367378,39.929114'},
            {'平安里站': '116.372883,39.933949;116.368663,39.940588;116.369349,39.941723;116.371116,39.942727;116.371892,39.943525'},
            {'积水潭站': '116.371924,39.948551'},
            {'北太平庄': '116.370131,39.967898'},
            {'牡丹园': '116.369844,39.976603'}
        ]},
        {'17号线': [
            {'未来科技城北区': '116.469014,40.11782;116.467732,40.113095;116.467217,40.109157;116.452625,40.090774;116.451152,40.085652;116.442154,40.078165'},
            {'天通苑东站': '116.442154,40.06858;116.441382,40.021925;116.45151,40.017116;116.454857,40.013511;116.449965,39.999902'},
            {'望京西站': '116.449884,39.995724;116.443677,39.989085;116.443763,39.988;116.444321,39.986948;116.454642,39.981045;116.454739,39.980774;116.454707,39.980593;116.454583,39.980338'},
            {'太阳宫': '116.447469,39.972678'},
            {'西坝河站': '116.441541,39.966297;116.437267,39.962776;116.435701,39.960819;116.434499,39.957299;116.434478,39.954601;116.4351,39.951129;116.437095,39.949453;116.445249,39.949683;116.445904,39.949815;116.446708,39.949749;116.447663,39.949453'},
            {'香河园站': '116.450311,39.947594'},
            {'潘家园西站': '116.450872,39.876233'},
            {'亦庄站前区南': '116.609407,39.794407'}
        ]},
        
        {'房山线北延': [
            {'郭公庄': '116.301889,39.814322;116.301852,39.816893;116.302067,39.818119;116.303376,39.819315;116.304384,39.819596'},
            {'樊羊路站': '116.314319,39.81955;116.317627,39.819443;116.319472,39.820349;116.32003,39.821453;116.32003,39.825854'},
            {'四环路站': '116.320472,39.829174'},
            {'首经贸': '116.316772,39.84176;116.320759,39.848089;116.321081,39.848913'},
            {'丰益桥南': '116.320261,39.852998'}
            
        ]},
        {'八通线南延': [
            {'土桥': '116.686349,39.871926;116.692507,39.870102;116.693795,39.86951;116.694868,39.868116;116.698794,39.860112;116.698644,39.85943;116.691821,39.849242;116.691174,39.848854;116.690405,39.848484'},
            {'环球影城': '116.676393,39.848179'}
        ]}
    ];

var that = '';

var mapLayer = {};


//此方式：弹窗非iframe模式
L.widget.bindClass(L.widget.BaseWidget.extend({
    map: null,//框架会自动对map赋值
    options: { 
        resources: ['view.css'],
        view: [
            { type: "append", url: "view.html" }
        ],
    },
    //初始化[仅执行1次]
    create: function () {
        //map.setView([39.911843, 116.391907], 10);
        /*debugger;
        L.tileLayer('http://t1.tianditu.com/vec_c/wmts?layer=vec&style=default&tilematrixset=c&Service=WMTS&Request=GetTile&Version=1.0.0&Format=tiles&TileMatrix={z}&TileCol={x}&TileRow={y}', {
           maxZoom: 20,
           tileSize: 256,
           zoomOffset: 1
        }).addTo(map);*/

    },
    //每个窗口创建完成后调用
    winCreateOK: function (viewopt, html) {
        //此处可以绑定页面dom事件
        that = this;
        that.drawSubWayLinegh();
        that.drawSubWayLinezj();
        var inputdom = document.querySelectorAll('input[name="xianlu"]');
        for(var i = 0; i < inputdom.length; i++){
            inputdom[i].addEventListener("click", function(e){
                if(e.currentTarget.value === 'guihua'){
                    if(e.currentTarget.checked === true){
                        if(!map.hasLayer(lineLayergh)){
                            map.addLayer(lineLayergh);
                        }
                        if(!map.hasLayer(labelLayergh) && map.getZoom() > 13){
                            map.addLayer(labelLayergh);
                        }
                        if(!map.hasLayer(pointLayergh) && map.getZoom() > 13){
                            map.addLayer(pointLayergh);
                        }
                        if(!map.hasLayer(lineNameLayergh) && map.getZoom() > 12){
                            map.addLayer(lineNameLayergh);
                        }
                        if(!map.hasLayer(lineNameLayergh2) && map.getZoom() > 12){
                            map.addLayer(lineNameLayergh2);
                        }
                    }else{
                        if(map.hasLayer(lineLayergh)){
                            map.removeLayer(lineLayergh);
                        }
                        if(map.hasLayer(labelLayergh)){
                            map.removeLayer(labelLayergh);
                        }
                        if(map.hasLayer(pointLayergh)){
                            map.removeLayer(pointLayergh);
                        }
                        if(map.hasLayer(lineNameLayergh)){
                            map.removeLayer(lineNameLayergh);
                        }
                        if(map.hasLayer(lineNameLayergh2)){
                            map.removeLayer(lineNameLayergh2);
                        }
                    }
                }

                if(e.currentTarget.value === 'zaijian'){
                    if(e.currentTarget.checked === true){
                        if(!map.hasLayer(lineLayerzj)){
                            map.addLayer(lineLayerzj);
                        }
                        if(!map.hasLayer(labelLayerzj) && map.getZoom() > 13){
                            map.addLayer(labelLayerzj);
                        }
                        if(!map.hasLayer(pointLayerzj) && map.getZoom() > 13){
                            map.addLayer(pointLayerzj);
                        }
                        if(!map.hasLayer(lineNameLayerzj) && map.getZoom() > 12){
                            map.addLayer(lineNameLayerzj);
                        }
                        if(!map.hasLayer(lineNameLayerzj2) && map.getZoom() > 12){
                            map.addLayer(lineNameLayerzj2);
                        }
                    }else{
                        if(map.hasLayer(lineLayerzj)){
                            map.removeLayer(lineLayerzj);
                        }
                        if(map.hasLayer(labelLayerzj)){
                            map.removeLayer(labelLayerzj);
                        }
                        if(map.hasLayer(pointLayerzj)){
                            map.removeLayer(pointLayerzj);
                        }
                        if(map.hasLayer(lineNameLayerzj)){
                            map.removeLayer(lineNameLayerzj);
                        }
                        if(map.hasLayer(lineNameLayerzj2)){
                            map.removeLayer(lineNameLayerzj2);
                        }
                    }
                }
            })
        }
    },
    //激活插件
    activate: function () {
         
    },
    //释放插件
    disable: function () { 

    },

    drawSubWayLinegh: function(){
        mapLayer.labelLayergh = [];
        mapLayer.pointLayergh = [];
        mapLayer.lineLayergh = [];
        mapLayer.lineNameLayergh = [];
        mapLayer.lineNameLayergh2 = [];
        mapLayer.lineNameLayerghAnother = [];
        for(var i = 0; i < ghLine.length; i++){ 
            for(var item in ghLine[i]){
                var lineZ = [];
                for(var j = 0; j < ghLine[i][item].length; j++){
                    for(var item2 in ghLine[i][item][j]){
                        var arrZ = ghLine[i][item][j][item2].split(';');
                        for(var k = 0; k < arrZ.length; k++){
                            var arr = that.gcj02towgs84(arrZ[k].split(',')[0] * 1, arrZ[k].split(',')[1] * 1 );
                            if(k === 0){
                                //如果是站点，增加一个标志位1
                                lineZ.push([arr[1], arr[0], 1]);
                            }else{
                                //如果是中间控制点，增加一个标志位0
                                lineZ.push([arr[1], arr[0], 0]);
                            }
                        }
                        var firstPoint = that.gcj02towgs84(arrZ[0].split(',')[0] * 1, arrZ[0].split(',')[1] * 1 );
                        mapLayer.pointLayergh.push(L.marker([ firstPoint[1], firstPoint[0] ], {
                            icon: L.divIcon({
                                className: '',
                                iconSize: [8, 8],
                                html: '<div style="width: 8px; height: 8px; background-color: red; border-radius: 6px;"></div>'
                            })
                        }));


                        mapLayer.labelLayergh.push(L.marker([ firstPoint[1], firstPoint[0] ], {
                            icon: L.divIcon({
                                className: '',
                                html: '<div style="width: 200px; height: 20px; color: black; position: relative; font-size: 14px;">' + item2 + '</div>',
                                iconAnchor: [20, 25]
                            })
                        }));
                    }
                }
                mapLayer.lineLayergh.push(L.polyline(lineZ, {color: 'red', dashArray: '5'}).bindPopup(item));
                var totalLenArr = [];
                var lineLen = 0;
                var spoint = '';
                var zpoint = '';
                var started = false;
                var tempolyline = [];
                var tempolylinecp = '';
                for(var k = 0; k < lineZ.length; k++){
                    if(lineZ[k][2] === 1 && lineZ[k+1] && started === false){
                        spoint = L.point(lineZ[k][0], lineZ[k][1]);
                        tempolyline = [];
                        lineLen = 0;
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                        started = true;
                    }else if(lineZ[k][2] === 0){
                        zpoint = L.point(lineZ[k][0], lineZ[k][1]);
                        lineLen += spoint.distanceTo(zpoint);
                        spoint = zpoint;
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                    }else if(lineZ[k][2] === 1 && started === true){
                        epoint = L.point(lineZ[k][0], lineZ[k][1]);
                        started = false;
                        lineLen += spoint.distanceTo(epoint);
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                        var temline = L.polyline(tempolyline, { weight: 0 });
                        mapLayer.lineNameLayergh.push(temline);
                        mapLayer.lineNameLayerghAnother.push([item, lineLen+'']);
                        k--;
                    }
                }

            }
            lineLayergh = L.layerGroup(mapLayer.lineLayergh);

            lineNameLayergh = L.layerGroup(mapLayer.lineNameLayergh);
            lineNameLayergh2 = '';

            labelLayergh = L.layerGroup(mapLayer.labelLayergh);
            pointLayergh = L.layerGroup(mapLayer.pointLayergh);
            map.on('zoomend', function(){
                if(map.getZoom() > 13){
                    var inputdom = document.querySelectorAll('input[name="xianlu"]');
                    for(var i = 0; i < inputdom.length; i++){
                        if(inputdom[i].value === 'guihua' && inputdom[i].checked === true){
                            labelLayergh.addTo(map);
                            pointLayergh.addTo(map);
                        }
                    }
                }else{
                    map.removeLayer(labelLayergh);
                    map.removeLayer(pointLayergh);
                }

                if(map.getZoom() > 12){
                    var inputdom = document.querySelectorAll('input[name="xianlu"]');
                    for(var i = 0; i < inputdom.length; i++){
                        if(inputdom[i].value === 'guihua' && inputdom[i].checked === true){
                            if(!map.hasLayer(lineNameLayergh)){
                                lineNameLayergh.addTo(map);
                                var ghNameLays = lineNameLayergh.getLayers();
                                for(var n = 0; n < ghNameLays.length; n++){
                                    tempolylinecp = ghNameLays[n].getCenter();
                                    
                                    if(mapLayer.lineNameLayerghAnother[n][1] * 1 > 0.025){
                                        mapLayer.lineNameLayergh2.push(L.marker([ tempolylinecp.lat, tempolylinecp.lng ], {
                                            icon: L.divIcon({
                                                html: '<span style="display: inline-block; color: white; white-space: nowrap; font-size: 3px; transform: translate(-50%, 0); background-color: red; border-radius: 5px; padding: 1px 1px;">' + mapLayer.lineNameLayerghAnother[n][0] + '</span>'
                                            })
                                        }));
                                    }

                                    lineNameLayergh2 = L.layerGroup(mapLayer.lineNameLayergh2);
                                    lineNameLayergh2.addTo(map);
                                }
                            }
                        }
                    }
                }else{
                    if(map.hasLayer(lineNameLayergh)){
                        map.removeLayer(lineNameLayergh);
                    }
                    
                    if(map.hasLayer(lineNameLayergh2)){
                        map.removeLayer(lineNameLayergh2);
                    }
                }

            });
        }
        var inputdom = document.querySelectorAll('input[name="xianlu"]');
        for(var i = 0; i < inputdom.length; i++){
            if(inputdom[i].value === 'guihua' && inputdom[i].checked === true){
                lineLayergh.addTo(map);
            }
        }
    },

    drawSubWayLinezj: function(){
        mapLayer.labelLayerzj = [];
        mapLayer.pointLayerzj = [];
        mapLayer.lineLayerzj = [];
        mapLayer.lineNameLayerzj = [];
        mapLayer.lineNameLayerzj2 = [];
        mapLayer.lineNameLayerzjAnother = [];
        for(var i = 0; i < zjLine.length; i++){
            for(var item in zjLine[i]){
                var lineZ = [];
                for(var j = 0; j < zjLine[i][item].length; j++){
                    for(var item2 in zjLine[i][item][j]){
                        var arrZ = zjLine[i][item][j][item2].split(';');
                        for(var k = 0; k < arrZ.length; k++){
                            var arr = that.gcj02towgs84(arrZ[k].split(',')[0] * 1, arrZ[k].split(',')[1] * 1 );
                            if(k === 0){
                                //如果是站点，增加一个标志位1
                                lineZ.push([arr[1], arr[0], 1]);
                            }else{
                                //如果是中间控制点，增加一个标志位0
                                lineZ.push([arr[1], arr[0], 0]);
                            }
                        }
                        var firstPoint = that.gcj02towgs84(arrZ[0].split(',')[0] * 1, arrZ[0].split(',')[1] * 1 );
                        mapLayer.pointLayerzj.push(L.marker([ firstPoint[1], firstPoint[0] ], {
                            icon: L.divIcon({
                                className: '',
                                iconSize: [8, 8],
                                html: '<div style="width: 8px; height: 8px; background-color: blue; border-radius: 6px;"></div>'
                            })
                        }));


                        mapLayer.labelLayerzj.push(L.marker([ firstPoint[1], firstPoint[0] ], {
                            icon: L.divIcon({
                                className: '',
                                html: '<div style="width: 200px; height: 20px; color: black; position: relative; font-size: 14px;">' + item2 + '</div>',
                                iconAnchor: [20, 25]
                            })
                        }));
                    }
                }
                mapLayer.lineLayerzj.push(L.polyline(lineZ, {color: 'blue'}));

                var totalLenArr = [];
                var lineLen = 0;
                var spoint = '';
                var zpoint = '';
                var started = false;
                var tempolyline = [];
                var tempolylinecp = '';
                for(var k = 0; k < lineZ.length; k++){
                    if(lineZ[k][2] === 1 && lineZ[k+1] && started === false){
                        spoint = L.point(lineZ[k][0], lineZ[k][1]);
                        tempolyline = [];
                        lineLen = 0;
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                        started = true;
                    }else if(lineZ[k][2] === 0){
                        zpoint = L.point(lineZ[k][0], lineZ[k][1]);
                        lineLen += spoint.distanceTo(zpoint);
                        spoint = zpoint;
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                    }else if(lineZ[k][2] === 1 && started === true){
                        epoint = L.point(lineZ[k][0], lineZ[k][1]);
                        started = false;
                        lineLen += spoint.distanceTo(epoint);
                        tempolyline.push([lineZ[k][0], lineZ[k][1]]);
                        var temline = L.polyline(tempolyline, { weight: 0 });
                        mapLayer.lineNameLayerzj.push(temline);
                        mapLayer.lineNameLayerzjAnother.push([item, lineLen+'']);
                        k--;
                    }
                }
            }
            debugger;
            lineLayerzj = L.layerGroup(mapLayer.lineLayerzj);
            
            lineNameLayerzj = L.layerGroup(mapLayer.lineNameLayerzj);
            lineNameLayerzj2 = '';

            labelLayerzj = L.layerGroup(mapLayer.labelLayerzj);
            pointLayerzj = L.layerGroup(mapLayer.pointLayerzj);
            map.on('zoomend', function(){
                if(map.getZoom() > 13){
                    var inputdom = document.querySelectorAll('input[name="xianlu"]');
                    for(var i = 0; i < inputdom.length; i++){
                        if(inputdom[i].value === 'zaijian' && inputdom[i].checked === true){
                            labelLayerzj.addTo(map);
                            pointLayerzj.addTo(map);
                        }
                    }
                }else{
                    map.removeLayer(labelLayerzj);
                    map.removeLayer(pointLayerzj);
                }

                if(map.getZoom() > 12){
                    var inputdom = document.querySelectorAll('input[name="xianlu"]');
                    for(var i = 0; i < inputdom.length; i++){
                        if(inputdom[i].value === 'zaijian' && inputdom[i].checked === true){
                            debugger;
                            if(!map.hasLayer(lineNameLayerzj)){

                                lineNameLayerzj.addTo(map);
                                var zjNameLays = lineNameLayerzj.getLayers();
                                for(var n = 0; n < zjNameLays.length; n++){
                                    tempolylinecp = zjNameLays[n].getCenter();
                                    
                                    if(mapLayer.lineNameLayerzjAnother[n][1] * 1 > 0.025){
                                        mapLayer.lineNameLayerzj2.push(L.marker([ tempolylinecp.lat, tempolylinecp.lng ], {
                                            icon: L.divIcon({
                                                html: '<span style="display: inline-block; color: white; white-space: nowrap; font-size: 3px; transform: translate(-50%, 0); background-color: blue; border-radius: 5px; padding: 1px 1px;">' + mapLayer.lineNameLayerzjAnother[n][0] + '</span>'
                                            })
                                        }));
                                    }

                                    lineNameLayerzj2 = L.layerGroup(mapLayer.lineNameLayerzj2);
                                    lineNameLayerzj2.addTo(map);
                                }
                            }
                        }
                    }
                }else{
                    if(map.hasLayer(lineNameLayerzj)){
                        map.removeLayer(lineNameLayerzj);
                    }
                    
                    if(map.hasLayer(lineNameLayerzj2)){
                        map.removeLayer(lineNameLayerzj2);
                    }
                }
            });
        }
        var inputdom = document.querySelectorAll('input[name="xianlu"]');
        for(var i = 0; i < inputdom.length; i++){
            if(inputdom[i].value === 'zaijian' && inputdom[i].checked === true){
                lineLayerzj.addTo(map);
            }
        }
    },

    //GCJ02 转换为 WGS84
    gcj02towgs84 : function(lng, lat) {
        var lat = lat;
        var lng = lng;
        var dlat = that.transformlat(lng - 105.0, lat - 35.0);
        var dlng = that.transformlng(lng - 105.0, lat - 35.0);
        var radlat = lat / 180.0 * PI;
        var magic = Math.sin(radlat);
        magic = 1 - ee * magic * magic;
        var sqrtmagic = Math.sqrt(magic);
        dlat = (dlat * 180.0) / ((a * (1 - ee)) / (magic * sqrtmagic) * PI);
        dlng = (dlng * 180.0) / (a / sqrtmagic * Math.cos(radlat) * PI);
        var mglat = lat + dlat;
        var mglng = lng + dlng;
        return [lng * 2 - mglng, lat * 2 - mglat];
    },
 
    transformlat : function(lng, lat) {
        var lat = lat;
        var lng = lng;
        var ret = -100.0 + 2.0 * lng + 3.0 * lat + 0.2 * lat * lat + 0.1 * lng * lat + 0.2 * Math.sqrt(Math.abs(lng));
        ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
        ret += (20.0 * Math.sin(lat * PI) + 40.0 * Math.sin(lat / 3.0 * PI)) * 2.0 / 3.0;
        ret += (160.0 * Math.sin(lat / 11.0 * PI) + 320 * Math.sin(lat * PI / 30.0)) * 2.0 / 3.0;
        return ret;
    },
 
    transformlng : function(lng, lat) {
        var lat = lat;
        var lng = lng;
        var ret = 300.0 + lng + 2.0 * lat + 0.1 * lng * lng + 0.1 * lng * lat + 0.1 * Math.sqrt(Math.abs(lng));
        ret += (20.0 * Math.sin(6.0 * lng * PI) + 20.0 * Math.sin(2.0 * lng * PI)) * 2.0 / 3.0;
        ret += (20.0 * Math.sin(lng * PI) + 40.0 * Math.sin(lng / 3.0 * PI)) * 2.0 / 3.0;
        ret += (150.0 * Math.sin(lng / 11.0 * PI) + 300.0 * Math.sin(lng / 30.0 * PI)) * 2.0 / 3.0;
        return ret;
    }
}));